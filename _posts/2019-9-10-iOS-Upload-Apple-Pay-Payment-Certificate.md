---
layout: post
title: Обновление Apple Pay Processing Certificate
---
Совсем недавно у меня стояла задача в обновлении **Apple Pay Processing Certificate**.  Потратил некоторое время, чтобы ответить на все свои вопросы для успешного выполнения задачи.

Хочу вам рассказать о некоторых особенностях, с которыми я столкнулся.

**Apple Pay Payment Processing Certificate** - сертификат обработки платежей,  который используется для шифрования токена Apple Pay.
Данный сертификат действителен в течение **25 месяцев** с момента создания. При истечении сертификаты ваши транзакции через Apple Pay будут отклоняться. Это может привести к большим убыткам для вашей компании. Apple уведомляет Вас на портале Apple Developer за **30, 15 и 7 дней** до даты истечения срока действия.

- Чтобы создать новый платежный сертификат необходимо создать **CSR (Certificate Signing Request)**. Вам необходимо понимать, кто занимается в вашей системе обработкой, расшифровкой токена Apple Pay. Многие платежные провайдеры занимаются дешифрованием самостоятельно и в этом случае необходимо обратиться к провайдеру и получить новый **CSR**.

  Если же все происходит на вашей стороне, то следует сделать следующее:

  1. Открываете *Keychain Access*, в выпадающем меню выбираете  *Keychain Access > Certificate Assistant > Request a Certificate from a Certificate Authority*.
  2. В открывшемся окне заполняете поле email, выбираете *"Saved to disk"*
  3. Отмечаете галочку *"Let me specify key pair information"*.
  4. Нажимайте продолжить, выбирайте местоположение для сохранения файла.
  5. Далее установите **Algorithm: ECC** и **Key Size: 256 bits**.

  И вот **CSR** готов.

- Далее необходимо загрузить **CSR** на портал *Apple Developer*.
- Выбираем необходимый нам *merchant Id* и создаем сертификат.

- После того как вы создали новый сертификат, вам необходимо зайти в него на портале и нажать *"Activate"*. Apple будет использовать новый сертификат примерно через 5 минут после нажатия кнопки *"Activate"* на портале.

Очень важно, что Вам **нет необходимости** обновлять приложение и перевыпускать его после замены сертификата.
